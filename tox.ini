; This file is mostly sorted by alphabet, though there are three main sections: tox, enviroments, and programs (used in the envs)
[tox]
# TODO(NostraDavid) add more python versions here
envlist = python3.9, python3.10, python3.11, python3.12, python3.13, report, styling
skip_missing_interpreters = true
isolated_build = True

# ENVIRONMENT SETTINGS
[testenv]
passenv = PYTHON_VERSION
description = run tests with pytest and coverage
allowlist_externals = *
commands = coverage run --parallel-mode --module pytest {posargs} --verbosity=2

[testenv:report]
description = create an xml file to use with vscode coverage extensions
depends = python3.9, python3.10, python3.11, python3.12, python3.13  # run after testing is done
allowlist_externals = *
commands =
    coverage combine
    coverage report
    coverage xml

[testenv:styling]
description = sort imports, format code,update code to use new conventions, remove unused variables, and check for any inconsistencies
allowlist_externals = *
commands =
    isort src/ tests/
    black src/ tests/
    pyupgrade --py39-plus
    autoflake --in-place --remove-all-unused-imports --remove-unused-variables --expand-star-imports --recursive .
    # TODO(NostraDavid) reenable flake8 when I get bump2version working with a CHANGELOG.md
    ; flake8

[flake8]
# One of the few programs that doesn't support pyproject.toml :(
; https://black.readthedocs.io/en/stable/guides/using_black_with_other_tools.html
extend-ignore = E203, W503
ignore =
    # line too long
    E501
max-complexity = 10
max-line-length = 120
exclude =
    notebooks,
    .tox
    .venv
    .git,
    __pycache__
